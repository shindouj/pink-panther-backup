# Klipper Auto-Update Configuration
# This file defines the devices to build and flash during Klipper updates
# Format: [board <id>]
# 
# Edit this file through your web interface (Mainsail/Fluidd) in the config section

[board sb2209]
description = "SB2209 toolhead board"
config_file = "sb2209.config"
flash_method = "katapult"
katapult_can_uuid = "a4d44fd5986b"

[board m8p]
description = "Manta M8P board with USB/CAN bridge"
config_file = "m8p.config"
flash_method = "katapult"
katapult_can_bridge_usb_device = "/dev/serial/by-id/usb-katapult_stm32h723xx_140028000951313339373836-if00"
katapult_can_bridge_can_uuid = "30ea0df2ffa3"

# Example boards with new Katapult parameters:

# Direct USB flashing
#[board lis2dw]
#description = "ADXL345/LIS2DW accelerometer"
#config_file = "adxl_klipper_makemenu.config"
#flash_method = "katapult"
#katapult_usb_device = "/dev/serial/by-id/usb-Klipper_rp2040_45474E621A86D2CA-if00"

# Direct CAN flashing
#[board sb2209]
#description = "SB2209 toolhead board"
#config_file = "sb2209_klipper_makemenu.config"
#flash_method = "katapult"
#katapult_can_uuid = "9c50d1bd9a07"

# USB/CAN Bridge flashing (mainboard with USB/CAN bridge)
#[board m4p]
#description = "Manta M4P board with USB/CAN bridge"
#config_file = "m4p_klipper_makemenu.config"
#flash_method = "katapult"
#katapult_can_bridge_usb_device = "/dev/serial/by-id/usb-katapult_stm32h723xx_140028000951313339373836-if00"
#katapult_can_bridge_can_uuid = "c1980e2023a1"

# Legacy format (still supported but deprecated)
#[board legacy_board]
#description = "Legacy configuration format"
#config_file = "legacy_klipper_makemenu.config"
#flash_method = "katapult_legacy"
#flash_target = "-d /dev/serial/by-id/usb-Klipper_stm32g0b1xx_3200310019504B5735313920-if00"

# Configuration Notes:
# - For direct USB flashing: Use katapult_usb_device
# - For direct CAN flashing: Use katapult_can_uuid  
# - For USB/CAN bridge: Use both katapult_can_bridge_usb_device and katapult_can_bridge_can_uuid
# - The script will automatically detect which method to use based on available parameters
# - To configure your board: make clean && make menuconfig
